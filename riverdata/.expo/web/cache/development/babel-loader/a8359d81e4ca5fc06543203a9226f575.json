{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Swipeable from 'react-native-gesture-handler/Swipeable';\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport Item from \"./Item\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar RDFavoritesTab = function RDFavoritesTab(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    favorites = _useState2[0],\n    setFavorites = _useState2[1];\n  var fetchFavorites = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var storedFavorites = JSON.parse(yield AsyncStorage.getItem('favorites')) || [];\n        setFavorites(storedFavorites);\n      } catch (error) {\n        console.error('Error fetching favorites:', error);\n      }\n    });\n    return function fetchFavorites() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var unsubscribe = navigation.addListener('focus', function () {\n      fetchFavorites();\n    });\n    return unsubscribe;\n  }, [navigation]);\n  var handleFavorite = function () {\n    var _ref3 = _asyncToGenerator(function* (site) {\n      var updatedFavorites = [];\n      try {\n        var index = favorites.findIndex(function (favorite) {\n          return favorite.siteValue === site.siteValue;\n        });\n        if (index >= 0) {\n          updatedFavorites = [].concat(_toConsumableArray(favorites.slice(0, index)), _toConsumableArray(favorites.slice(index + 1)));\n          setFavorites(updatedFavorites);\n        }\n        yield AsyncStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n      } catch (error) {\n        console.error('Error handling favorite site:', error);\n      }\n    });\n    return function handleFavorite(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var renderSwipeableItem = function renderSwipeableItem(_ref4) {\n    var item = _ref4.item;\n    var rightSwipe = function rightSwipe(progress, dragX) {\n      var scale = dragX.interpolate({\n        inputRange: [-80, 0],\n        outputRange: [1, 0],\n        extrapolate: 'clamp'\n      });\n      return _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return handleFavorite(item);\n        },\n        style: styles.swipeButtonFavorited,\n        children: _jsx(Animated.View, {\n          style: {\n            transform: [{\n              scale: scale\n            }]\n          },\n          children: _jsx(Ionicons, {\n            name: \"heart\",\n            size: 26,\n            color: \"white\"\n          })\n        })\n      });\n    };\n    return _jsx(Swipeable, {\n      renderRightActions: rightSwipe,\n      children: _jsx(View, {\n        style: styles.item,\n        children: _jsx(Item, {\n          label: item.siteName,\n          description: _jsx(Text, {\n            style: styles.gauges,\n            children: item.gauges + \" gauges\"\n          }),\n          onPress: function onPress() {\n            navigation.navigate('Site Gauges', {\n              gaugeId: item.siteValue\n            });\n          }\n        }, item.siteName + \"_\" + item.siteValue)\n      })\n    });\n  };\n  var renderItem = function renderItem(_ref5) {\n    var item = _ref5.item;\n    return _jsx(View, {\n      style: styles.item,\n      children: _jsx(Item, {\n        label: item.siteName,\n        description: _jsx(Text, {\n          style: styles.gauges,\n          children: item.gauges + \" gauges\"\n        }),\n        onPress: function onPress() {\n          navigation.navigate('Site Gauges', {\n            gaugeId: item.siteValue\n          });\n        }\n      }, item.siteName + \"_\" + item.siteValue)\n    });\n  };\n  return _jsx(View, {\n    style: styles.container,\n    children: favorites.length > 0 ? _jsx(FlatList, {\n      data: favorites,\n      renderItem: renderSwipeableItem,\n      keyExtractor: function keyExtractor(item) {\n        return item.siteName + \"_\" + item.siteValue;\n      }\n    }) : _jsx(View, {\n      style: styles.noFavoritesContainer,\n      children: _jsx(View, {\n        style: styles.box,\n        children: _jsx(Text, {\n          style: styles.noFavoritesText,\n          children: \"Your favorite sites will appear here\"\n        })\n      })\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    paddingVertical: 20,\n    paddingHorizontal: 10,\n    marginTop: 1\n  },\n  item: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    backgroundColor: '#f8f8f8',\n    borderRadius: 10,\n    marginBottom: 10\n  },\n  box: {\n    backgroundColor: '#F0F0F0',\n    borderRadius: 10,\n    padding: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1\n    },\n    shadowOpacity: 0.22,\n    shadowRadius: 2.22,\n    elevation: 3\n  },\n  gauges: {\n    fontStyle: 'italic'\n  },\n  swipeButtonFavorited: {\n    justifyContent: 'center',\n    alignItems: 'flex-end',\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 10,\n    marginBottom: 10,\n    backgroundColor: '#C41E3A'\n  },\n  noFavoritesContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 150\n  },\n  noFavoritesText: {\n    fontSize: 16,\n    color: '#5A5A5A'\n  }\n});\nexport default RDFavoritesTab;","map":{"version":3,"names":["React","useEffect","useState","AsyncStorage","Swipeable","Ionicons","Item","RDFavoritesTab","navigation","favorites","setFavorites","fetchFavorites","storedFavorites","JSON","parse","getItem","error","console","unsubscribe","addListener","handleFavorite","site","updatedFavorites","index","findIndex","favorite","siteValue","slice","setItem","stringify","renderSwipeableItem","item","rightSwipe","progress","dragX","scale","interpolate","inputRange","outputRange","extrapolate","styles","swipeButtonFavorited","transform","siteName","gauges","navigate","gaugeId","renderItem","container","length","noFavoritesContainer","box","noFavoritesText","StyleSheet","create","flex","backgroundColor","paddingVertical","paddingHorizontal","marginTop","borderRadius","marginBottom","padding","alignItems","justifyContent","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","fontStyle","fontSize","color"],"sources":["C:/Users/subte/RD2/riverdata/riverdata/components/RDFavoritesTab.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text, FlatList, StyleSheet, Animated, TouchableOpacity } from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport Swipeable from 'react-native-gesture-handler/Swipeable';\r\nimport Ionicons from 'react-native-vector-icons/Ionicons';\r\nimport Item from './Item';\r\n\r\nconst RDFavoritesTab = ({ navigation }) => {\r\n  const [favorites, setFavorites] = useState([]);\r\n\r\n  const fetchFavorites = async () => {\r\n    try {\r\n      const storedFavorites = JSON.parse(await AsyncStorage.getItem('favorites')) || [];\r\n      setFavorites(storedFavorites);\r\n    } catch (error) {\r\n      console.error('Error fetching favorites:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = navigation.addListener('focus', () => {\r\n      fetchFavorites();\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [navigation]);\r\n\r\n  const handleFavorite = async (site) => {\r\n    let updatedFavorites = [];\r\n    try {\r\n      const index = favorites.findIndex((favorite) => favorite.siteValue === site.siteValue);\r\n  \r\n      if (index >= 0) {\r\n        // Remove site from favorites if it's already there\r\n        updatedFavorites = [...favorites.slice(0, index), ...favorites.slice(index + 1)];\r\n        setFavorites(updatedFavorites);\r\n      }\r\n  \r\n      await AsyncStorage.setItem('favorites', JSON.stringify(updatedFavorites));\r\n    } catch (error) {\r\n      console.error('Error handling favorite site:', error);\r\n    }\r\n  };\r\n\r\n  const renderSwipeableItem = ({ item }) => {\r\n    const rightSwipe = (progress, dragX) => {\r\n      const scale = dragX.interpolate({\r\n        inputRange: [-80, 0],\r\n        outputRange: [1, 0],\r\n        extrapolate: 'clamp',\r\n      });\r\n  \r\n      return (\r\n        <TouchableOpacity\r\n          onPress={() => handleFavorite(item)}\r\n          style={styles.swipeButtonFavorited}\r\n        >\r\n          <Animated.View style={{ transform: [{ scale }] }}>\r\n            <Ionicons name=\"heart\" size={26} color=\"white\" />\r\n          </Animated.View>\r\n        </TouchableOpacity>\r\n      );\r\n    };\r\n  \r\n    return (\r\n      <Swipeable renderRightActions={rightSwipe}>\r\n        <View style={styles.item}>\r\n          <Item\r\n            key={`${item.siteName}_${item.siteValue}`}\r\n            label={item.siteName}\r\n            description={<Text style={styles.gauges}>{`${item.gauges} gauges`}</Text>}\r\n            onPress={() => {\r\n              navigation.navigate('Site Gauges', { gaugeId: item.siteValue });\r\n            }}\r\n          />\r\n        </View>\r\n      </Swipeable>\r\n    );\r\n  };  \r\n\r\n  const renderItem = ({ item }) => (\r\n    <View style={styles.item}>\r\n      <Item\r\n        key={`${item.siteName}_${item.siteValue}`}\r\n        label={item.siteName}\r\n        description={<Text style={styles.gauges}>{`${item.gauges} gauges`}</Text>}\r\n        onPress={() => {\r\n          navigation.navigate('Site Gauges', { gaugeId: item.siteValue });\r\n        }}\r\n      />\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {favorites.length > 0 ? (\r\n        <FlatList\r\n          data={favorites}\r\n          renderItem={renderSwipeableItem}\r\n          keyExtractor={(item) => `${item.siteName}_${item.siteValue}`}\r\n        />\r\n      ) : (\r\n        <View style={styles.noFavoritesContainer}>\r\n            <View style={styles.box}>\r\n          <Text style={styles.noFavoritesText}>Your favorite sites will appear here</Text>\r\n        </View>\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n   };  \r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    paddingVertical: 20,\r\n    paddingHorizontal: 10,\r\n    marginTop: 1,\r\n  },\r\n  item: {\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 10,\r\n    backgroundColor: '#f8f8f8',\r\n    borderRadius: 10,\r\n    marginBottom: 10,\r\n  },\r\n  box: {\r\n    backgroundColor: '#F0F0F0',\r\n    borderRadius: 10,\r\n    padding: 10,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n    elevation: 3,\r\n  },\r\n  gauges: {\r\n    fontStyle: 'italic',\r\n  },\r\n  swipeButtonFavorited: {\r\n    justifyContent: 'center',\r\n    alignItems: 'flex-end',\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 10,\r\n    borderRadius: 10,\r\n    marginBottom: 10,\r\n    backgroundColor: '#C41E3A',\r\n  },  \r\n  noFavoritesContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 150,\r\n  },\r\n  noFavoritesText: {\r\n    fontSize: 16,\r\n    color: '#5A5A5A',\r\n  },\r\n});\r\n\r\nexport default RDFavoritesTab;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}